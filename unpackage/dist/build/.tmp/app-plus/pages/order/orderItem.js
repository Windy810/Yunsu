(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/orderItem"],{"257b":function(e,t,n){"use strict";var a=n("3213"),r=n.n(a);r.a},3213:function(e,t,n){},3746:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("4795")),o=s(n("6fc6")),u=n("1c7a"),i=s(n("9386"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,r,o,u){try{var i=e[o](u),s=i.value}catch(c){return void n(c)}i.done?t(s):Promise.resolve(s).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function u(e){c(o,a,r,u,i,"next",e)}function i(e){c(o,a,r,u,i,"throw",e)}u(void 0)}))}}var l=function(){n.e("components/rf-load-more/rf-load-more").then(function(){return resolve(n("3ed1"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/uni-tag/uni-tag").then(function(){return resolve(n("3b81"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/rf-swipe-action/rf-swipe-action").then(function(){return resolve(n("999f"))}.bind(null,n)).catch(n.oe)},v=function(){Promise.all([n.e("common/vendor"),n.e("components/rf-swipe-action-item/rf-swipe-action-item")]).then(function(){return resolve(n("c14a"))}.bind(null,n)).catch(n.oe)},h={components:{rfSwipeAction:p,rfSwipeActionItem:v,rfLoadMore:l,uniTag:f},data:function(){return{orderItemList:[],errorImg:o.default,page:1,loadingType:"more",token:null,options:[],orderStatus:null}},filters:{time:function(e){return(0,i.default)(1e3*e).format("YYYY-MM-DD HH:mm:ss")},filterIsEvaluate:function(e){var t=["未评价","已评价","已追评"];return t[parseInt(e,10)]},filterProductStatus:function(e){var t=null;if(0!==parseInt(e.refund_status,10)){var n=[{key:1,value:"退款/退货申请"},{key:2,value:"等待退货"},{key:3,value:"等待确认收货"},{key:4,value:"等待确认退款"},{key:5,value:"同意退款"},{key:-1,value:"退款已拒绝"},{key:-2,value:"退款已关闭"},{key:-3,value:"退款不通过"}];n.forEach((function(n){n.key==e.refund_status&&(t=n.value)}))}else if(4===parseInt(e.order_status,10)){var a=[{key:0,value:"未评价"},{key:1,value:"已评价"},{key:2,value:"已追评"}];a.forEach((function(n){n.key==e.is_evaluate&&(t=n.value)}))}else{var r=[{key:0,value:"待付款"},{key:1,value:"待发货"},{key:2,value:"已发货"},{key:3,value:"已收货"},{key:4,value:"已完成"},{key:-1,value:"退货申请"},{key:-2,value:"退款中"},{key:-3,value:"退款完成"},{key:-4,value:"已关闭"},{key:-5,value:"撤销申请"}];r.forEach((function(n){n.key==e.order_status&&(t=n.value)}))}return t}},computed:{itemOptions:function(){return function(e,t){var n=[],a=this.orderStatus;if(1===parseInt(a,10))switch(t){case"0":n.push({text:"仅退款"});break;case"1":n.push({text:"取消",style:{backgroundColor:"rgb(254,156,1)"}});break;default:break}else if(2===parseInt(a,10))switch(t){case"0":n.push({text:"退款/退货"});break;case"1":n.push({text:"取消",style:{backgroundColor:"rgb(254,156,1)"}});break;case"2":n.push({text:"填写退货信息",style:{backgroundColor:"rgb(254,156,1)"}});break;default:break}else if(4===parseInt(a,10)){switch(e){case"0":n.push({text:"评价",style:{backgroundColor:"rgb(254,156,1)"}});break;case"1":n.push({text:"追加评价",style:{backgroundColor:"rgb(255,58,49)"}});break;case 2:break;default:break}switch(t){case"0":n.push({text:"退款/退货"});break;case"-3":n.push({text:"退款/退货"});break;case"1":n.push({text:"取消",style:{backgroundColor:"rgb(254,156,1)"}});break;case"2":n.push({text:"填写退货信息",style:{backgroundColor:"rgb(254,156,1)"}});break;default:break}}return n}}},onLoad:function(e){this.initData(e)},methods:{bindClick:function(e){if("仅退款"===e.content.text){if(0!==parseInt(e.data.refund_status,10))return void this.$api.msg("您已经提交了退款申请");this.goRefund(e.data,1)}else if("退款/退货"===e.content.text){if(0!==parseInt(e.data.refund_status,10))return void this.$api.msg("您已经提交了退货申请");2==e.data.order_status?this.goRefund(e.data,2):4==e.data.order_status&&this.goRefund(e.data,3)}else"取消"===e.content.text?(this.handleCloseOrderRefundApply(e.data.id),2==e.data.order_status?this.goRefund(e.data,2):4==e.data.order_status&&this.goRefund(e.data,3)):"取消"===e.content.text||"取消"===e.content.text?this.handleCloseOrderRefundApply(e.data.order_status,e.data.id):"评价"===e.content.text?this.goEvaluation(e.data):"追加评价"===e.content.text?this.goEvaluation(e.data,"add"):"填写退货信息"===e.content.text&&this.navTo("/pages/order/sales-return?data=".concat(JSON.stringify(e.data)))},handleCloseOrderRefundApply:function(t,n){var o=this;return d(r.default.mark((function i(){var s;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=u.closeOrderRefundApply,4==t&&(s=u.orderCustomerRefundClose),r.next=4,o.$post("".concat(s),{id:n}).then((function(t){e.navigateBack({delta:1})})).catch((function(e){a("log",e," at pages\\order\\orderItem.vue:260")}));case 4:case"end":return r.stop()}}),i)})))()},initData:function(t){var n=this;return d(r.default.mark((function o(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.token=e.getStorageSync("accessToken")||void 0,r.next=3,n.$get("".concat(u.orderDetail),{id:t.id}).then((function(e){n.orderItemList=e.data.product,n.orderStatus=e.data.order_status})).catch((function(e){a("log",e," at pages\\order\\orderItem.vue:272")}));case 3:case"end":return r.stop()}}),o)})))()},onImageError:function(e){this.orderItemList[e].picture=this.errorImg},goEvaluation:function(t,n){e.navigateTo({url:"/pages/evaluation/evaluation?data=".concat(JSON.stringify(t),"&type=").concat(n)})},navTo:function(t){e.navigateTo({url:t})},goRefund:function(t,n){e.navigateTo({url:"/pages/refund/refund?data=".concat(JSON.stringify(t),"&refundType=").concat(n)})}}};t.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])},6438:function(e,t,n){"use strict";n.r(t);var a=n("bc41"),r=n("d83d");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("257b");var u,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);t["default"]=s.exports},bc41:function(e,t,n){"use strict";var a={"rf-swipe-action":function(){return n.e("components/rf-swipe-action/rf-swipe-action").then(n.bind(null,"999f"))},"rf-swipe-action-item":function(){return Promise.all([n.e("common/vendor"),n.e("components/rf-swipe-action-item/rf-swipe-action-item")]).then(n.bind(null,"c14a"))},"uni-tag":function(){return n.e("components/uni-tag/uni-tag").then(n.bind(null,"3b81"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.orderItemList,(function(t,n){var a=e.itemOptions(t.is_evaluate,t.refund_status),r=e._f("filterProductStatus")(t),o=e._f("time")(t.created_at);return{$orig:e.__get_orig(t),m0:a,f0:r,f1:o}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},o=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}))},d83d:function(e,t,n){"use strict";n.r(t);var a=n("3746"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},f5e7:function(e,t,n){"use strict";(function(e){n("1026"),n("921b");a(n("66fd"));var t=a(n("6438"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])}},[["f5e7","common/runtime","common/vendor"]]]);