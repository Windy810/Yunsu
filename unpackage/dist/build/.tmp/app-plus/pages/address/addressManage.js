(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{"0d08":function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(a("4795")),i=a("1c7a"),d=a("4529");function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a,n,r,i,d){try{var u=e[i](d),s=u.value}catch(l){return void a(l)}u.done?t(s):Promise.resolve(s).then(n,r)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function d(e){s(i,n,r,d,u,"next",e)}function u(e){s(i,n,r,d,u,"throw",e)}d(void 0)}))}}var c={data:function(){return{addressData:{realname:"",mobile:"",address_details:"",address_name:"请选择地址",address:"",is_default:!1,province_id:"",city_id:"",area_id:""},multiArray:[[],[],[]],multiIndex:[0,0,0],loading:!0}},onLoad:function(e){this.initData(e)},methods:{initData:function(t){var a=this;return l(r.default.mark((function n(){var i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i="新增收货地址","edit"!==t.type){n.next=5;break}return i="编辑收货地址",n.next=5,a.getAddressDetail(t.id);case 5:return a.manageType=t.type,e.setNavigationBarTitle({title:i}),n.next=9,a.getProvinceList();case 9:case"end":return n.stop()}}),n)})))()},getAddressDetail:function(e){var t=this;return l(r.default.mark((function a(){return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$get("".concat(i.addressDetail),{id:e}).then(function(){var e=l(r.default.mark((function e(a){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!1,t.addressData=a.data;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.loading=!1}));case 2:case"end":return a.stop()}}),a)})))()},getProvinceList:function(){var e=this;return l(r.default.mark((function t(){var a,i,u,s,c,o,f,m,p;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=0,i=0,u=0,s=null,c=null,o=null,f=null,m=null,p=null,t.next=11,e.$get("".concat(d.provinceList)).then(function(){var t=l(r.default.mark((function t(v){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!1,e.multiArray[0]=v.data,e.addressData.province_id?v.data.forEach((function(t,n){parseInt(t.id,10)==parseInt(e.addressData.province_id,10)&&(a=n,s=t.id,f=t.title)})):(s=e.multiArray[0][0].id,f=e.multiArray[0][0].title),t.next=5,e.$get("".concat(d.provinceList),{pid:s}).then(function(){var t=l(r.default.mark((function t(l){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.multiArray[1]=l.data,e.addressData.city_id?l.data.forEach((function(t,a){parseInt(t.id,10)==parseInt(e.addressData.city_id,10)&&(i=a,c=t.id,m=t.title)})):(c=e.multiArray[1][0].id,m=e.multiArray[1][0].title),t.next=4,e.$get("".concat(d.provinceList),{pid:c}).then((function(t){e.multiArray[2]=t.data,e.addressData.area_id?t.data.forEach((function(t,a){parseInt(t.id,10)==parseInt(e.addressData.area_id,10)&&(u=a,o=t.id,p=t.title)})):(o=e.multiArray[2][0].id,p=e.multiArray[2][0].title),e.multiIndex=[a,i,u],e.addressData.province_id=s,e.addressData.city_id=c,e.addressData.area_id=o,e.addressData.address_name="".concat(f,", ").concat(m,", ").concat(p)})).catch((function(e){n("log",e," at pages\\address\\addressManage.vue:159")}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){n("log",e," at pages\\address\\addressManage.vue:162")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,n("log",t," at pages\\address\\addressManage.vue:166")}));case 11:case"end":return t.stop()}}),t)})))()},bindMultiPickerColumnChange:function(e){var t=this;return l(r.default.mark((function a(){var i,u,s,c,o,f,m,p,v;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.multiIndex[e.detail.column]=e.detail.value,i=0,u=0,s=0,c=null,o=null,f=null,m=null,p=null,v=null,a.t0=e.detail.column,a.next=0===a.t0?13:1===a.t0?22:2===a.t0?39:60;break;case 13:a.t1=t.multiIndex[0],a.next=a.t1===t.multiIndex[0]?16:21;break;case 16:return c=t.multiArray[0][e.detail.value].id,m=t.multiArray[0][e.detail.value].title,a.next=20,t.$get("".concat(d.provinceList),{pid:t.multiArray[0][e.detail.value].id}).then(function(){var a=l(r.default.mark((function a(u){return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.multiArray[1]=u.data,o=t.multiArray[1][0].id,p=t.multiArray[1][0].title,i=e.detail.value,t.multiIndex=[i,0,0],a.next=7,t.$get("".concat(d.provinceList),{pid:t.multiArray[1][e.detail.column].id}).then((function(e){t.multiArray[2]=e.data,f=t.multiArray[2][0].id,v=t.multiArray[2][0].title})).catch((function(e){n("log",e," at pages\\address\\addressManage.vue:203")}));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){n("log",e," at pages\\address\\addressManage.vue:206")}));case 20:return a.abrupt("break",21);case 21:return a.abrupt("break",60);case 22:a.t2=t.multiIndex[0],a.next=a.t2===t.multiIndex[0]?25:38;break;case 25:a.t3=t.multiIndex[1],a.next=a.t3===t.multiIndex[1]?28:37;break;case 28:return c=t.multiArray[0][t.multiIndex[0]].id,m=t.multiArray[0][t.multiIndex[0]].title,o=t.multiArray[1][e.detail.value].id,p=t.multiArray[1][e.detail.value].title,u=e.detail.value,t.multiIndex=[t.multiIndex[0],u,0],a.next=36,t.$get("".concat(d.provinceList),{pid:t.multiArray[1][e.detail.value].id}).then((function(e){t.multiArray[2]=e.data})).catch((function(e){n("log",e," at pages\\address\\addressManage.vue:228")}));case 36:return a.abrupt("break",37);case 37:return a.abrupt("break",38);case 38:return a.abrupt("break",60);case 39:a.t4=t.multiIndex[0],a.next=a.t4===t.multiIndex[0]?42:59;break;case 42:a.t5=t.multiIndex[1],a.next=a.t5===t.multiIndex[1]?45:58;break;case 45:a.t6=t.multiIndex[2],a.next=a.t6===t.multiIndex[2]?48:57;break;case 48:return c=t.multiArray[0][t.multiIndex[0]].id,m=t.multiArray[0][t.multiIndex[0]].title,o=t.multiArray[1][t.multiIndex[1]].id,p=t.multiArray[1][t.multiIndex[1]].title,f=t.multiArray[2][e.detail.value].id,v=t.multiArray[2][e.detail.value].title,s=e.detail.value,t.multiIndex=[t.multiIndex[0],t.multiIndex[1],s],a.abrupt("break",57);case 57:return a.abrupt("break",58);case 58:return a.abrupt("break",59);case 59:return a.abrupt("break",60);case 60:t.addressData.address_name="".concat(m,", ").concat(p,", ").concat(v),t.addressData.province_id=c,t.addressData.city_id=o,t.addressData.area_id=f,t.$forceUpdate();case 65:case"end":return a.stop()}}),a)})))()},handleRealNameChange:function(e){this.addressData.realname=e.detail.value},bindAddressDetailsChange:function(e){this.addressData.address_details=e.detail.value},handleMobileChange:function(e){this.addressData.mobile=e.detail.value},switchChange:function(e){this.addressData.is_default=e.detail.value},chooseLocation:function(){var t=this;e.chooseLocation({success:function(e){t.addressData.addressName=e.name,t.addressData.address=e.name}})},confirm:function(){var e=this.addressData;e.realname?/(^1[3|4|5|7|8][0-9]{9}$)/.test(e.mobile)?"edit"===this.manageType?this.handleAddressUpdate(e):this.handleAddressCreate(e):this.$api.msg("请输入正确的手机号码"):this.$api.msg("请填写收货人姓名")},handleAddressUpdate:function(t){var a=this;return l(r.default.mark((function d(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$put("".concat(i.addressUpdate,"?id=").concat(t.id),{realname:t.realname,mobile:t.mobile,address_details:t.address_details,is_default:t.is_default?1:0,province_id:t.province_id,city_id:t.city_id,area_id:t.area_id}).then((function(t){a.$api.msg("恭喜您, 收货地址修改成功！"),e.navigateBack()})).catch((function(e){n("log",e," at pages\\address\\addressManage.vue:325")}));case 2:case"end":return r.stop()}}),d)})))()},handleAddressCreate:function(t){var a=this;return l(r.default.mark((function d(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$post("".concat(i.addressCreate),{realname:t.realname,mobile:t.mobile,address_details:t.address_details,is_default:t.is_default?1:0,province_id:t.province_id,city_id:t.city_id,area_id:t.area_id}).then((function(t){a.$api.msg("恭喜您, 收货地址修改成功！"),e.navigateBack()})).catch((function(e){n("log",e," at pages\\address\\addressManage.vue:341")}));case 2:case"end":return r.stop()}}),d)})))()}}};t.default=c}).call(this,a("6e42")["default"],a("0de9")["default"])},1239:function(e,t,a){"use strict";var n=a("f725"),r=a.n(n);r.a},"325b":function(e,t,a){"use strict";(function(e){a("1026"),a("921b");n(a("66fd"));var t=n(a("8e19"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},"5b95":function(e,t,a){"use strict";a.r(t);var n=a("0d08"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"8e19":function(e,t,a){"use strict";a.r(t);var n=a("efb0"),r=a("5b95");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("1239");var d,u=a("f0c5"),s=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],d);t["default"]=s.exports},efb0:function(e,t,a){"use strict";var n={"rf-loading":function(){return a.e("components/rf-loading/rf-loading").then(a.bind(null,"ad54"))}},r=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}))},f725:function(e,t,a){}},[["325b","common/runtime","common/vendor"]]]);